<!DOCTYPE html>
<head>
  <title>FGC - Concelho de Rio Maior</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" charset=utf-8>

<!-- Estilos -->
  <link rel="stylesheet" href="css/leaflet.css" />
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
  <link rel="stylesheet" href="css/leaflet-sidebar.css" />


<!-- Estilo para a barra de geocoding -->

<link  href="https://unpkg.com/leaflet-geosearch@latest/assets/css/leaflet.css" rel="stylesheet" />

<!-- + estilos -->
  <style>
        body {
            padding: 0;
            margin: 0;
        }

        html, body, #map {
            height: 100%;
            font: 10pt "Helvetica Neue", Arial, Helvetica, sans-serif;
        }

        .lorem {
            font-style: italic;
            text-align: justify;
            color: #AAA;
        }
    </style>

</head>
<body>
    <div id="sidebar" class="leaflet-sidebar collapsed">
        <!-- Nav tabs -->
        <div class="leaflet-sidebar-tabs">
            <ul role="tablist">
                <li><a href="#home" role="tab"><i class="fa fa-bars active"></i></a></li>
                <li><a onclick="alert('Caso necessite de mais esclarecimentos, poderá contactar a sua Junta de Freguesia, o Gabinete Técnico Florestal (GTF) do Munícipio de Rio Maior, ou a GNR.')"><i class="fa fa-info"></i></a></li>
            </ul>

            <ul role="tablist">
                <li><a href="https://github.com/CMRioMaior/fgc_riomaior" target="_blank"><i class="fa fa-github"></i></a></li>
            </ul>
        </div>

        <!-- Tab panes -->
        <div class="leaflet-sidebar-content">
            <div class="leaflet-sidebar-pane" id="home">
                <h1 class="leaflet-sidebar-header">
                    FGC - Concelho de Rio Maior
                    <span class="leaflet-sidebar-close"><i class="fa fa-caret-left"></i></span>
                </h1>
                <p></p>
                 <a href=""><img width="140" src="images/logo.png" alt="logo"></a>

                <p>O Município de Rio Maior e os restantes agentes de proteção civil do concelho alertam, para a obrigatoriedade dos proprietários:
                <ul>
                 • dos terrenos em volta das edificações ou instalações isoladas, terão de proceder à gestão de combustíveis numa faixa mínima de 50 metros, até 15 de março <p><strong> - áreas com a cor <a href=""><img src="images/fgc_isoladas_0.png" alt="isoladas"></a></strong> 
                <p></p>
                  • dos terrenos em volta dos aglomerados populacionais, terão de proceder à gestão de combustíveis numa faixa mínima de 100 metros, até 30 de abril <p><strong>- áreas com a cor <a href=""><img src="images/fgc_aglomerado_1.png" alt="aglomerados"></a></strong>
                </ul>

                O incumprimento, constitui uma contra-ordenação punível com coima até € 120 000.</p>

                <h2>Consulte as faixas de gestão de combustível na sua freguesia:</h2>
                <ul>
                    <li><a href="#zoom=14&lat=39.42067&lon=-8.91747">Alcobertas</a></li>
                    <li><a href="#zoom=15&lat=39.26003&lon=-8.92288">Arrouquelas</a></li>
                    <li><a href="#zoom=15&lat=39.29481&lon=-8.94605">Asseiceira</a></li>
                    <li><a href="#zoom=15&lat=39.36764&lon=-8.85108">Fráguas</a></li>
                    <li><a href="#zoom=14&lat=39.32925&lon=-8.96013">Rio Maior</a></li>
                    <li><a href="#zoom=15&lat=39.36937&lon=-8.89142">São Sebastião</a></li>
                    <li><a href="#zoom=15&lat=39.29166&lon=-8.87846">UF de S. João da Ribeira e Ribeira de S. João</a></li>
                    <li><a href="#zoom=15&lat=39.28289&lon=-8.82387">UF de Azambujeira e Malaqueijo</a></li>
                    <li><a href="#zoom=15&lat=39.25605&lon=-8.85666">UF de Vila da Marmeleira e Assentiz</a></li>
                    <li><a href="#zoom=15&lat=39.33847&lon=-8.82868">UF de Outeiro da Cortiçada e Arruda dos Pisões</a></li>
                </ul>

                <h2>Poderá obter mais informações em:</h2>
                <ul>



                </ul>


                <p class="lorem" style="height: 15px;margin-top: 250px;"></i>Criado com recurso a software livre, poderá ser utilizado e distribuído sob a <a href="https://github.com/CMRioMaior/fgc_riomaior/blob/master/LICENSE" target="_blank">licença MIT</a></p>

            </div>

        </div>
    </div>

  <div id="map"></div>

  <!-- javascripts necessários -->
  <script src="js/qgis2web_expressions.js"></script>
  <script src="js/Autolinker.min.js"></script>
  <script src="js/leaflet.js"></script>
  <script src="js/Bing.js"></script>
  <script src="js/leaflet-sidebar.js"></script>
  <script src="js/bundle.min.js"></script>
    <script src="js/Permalink.js"></script>
    <script src="jsPermalink.Marker.js"></script>
    <script src="js/Permalink.Layer.js"></script>
    <script src="js/Permalink.Overlay.js"></script>


   <!-- DADOS PARA FUNCIONAR -->
    <script src="data/fgc_isoladas_0.js"></script>
    <script src="data/fgc_aglomerado_1.js"></script>
    <script src="data/concelho_rm_2.js"></script>

   <script>



    // novo código para o geocoder
        var GeoSearchControl = window.GeoSearch.GeoSearchControl;
        var OpenStreetMapProvider = window.GeoSearch.OpenStreetMapProvider;

    // geocoder
        var provider = new OpenStreetMapProvider();

        var searchControl = new GeoSearchControl({
            provider: provider,
            style: 'bar',
            showMarker: true,
            retainZoomLevel: false,
            position: 'topright',
            animateZoom: true,
        });


        var map = L.map('map', {
            zoomControl:true, maxZoom:18, minZoom:12
        }).fitBounds([[39.2428683221,-9.11034698178],[39.4572129553,-8.68108422426]]);


        map.attributionControl.addAttribution('<a href="http://www.cm-riomaior.pt/" target="_blank">2018 CM Rio Maior</a>');


        
        var bounds_group = new L.featureGroup([]);

        var osm = new L.TileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png');
        // for all possible values and explanations see "Template Parameters" in https://msdn.microsoft.com/en-us/library/ff701716.aspx
        var imagerySet = "AerialWithLabels"; // AerialWithLabels | Birdseye | BirdseyeWithLabels | Road
        var bing = new L.BingLayer("AuhiCJHlGzhg93IqUH_oCpl_-ZUrIE6SPftlyGYUvr9Amx5nzA-WqGcPquyFZl4L", {type: imagerySet});
        


        var sidebar = L.control.sidebar({ container: 'sidebar' })
            .addTo(map)
            .open('home');


        map.addControl(new L.Control.Permalink({text: ''}));

        map.addControl(new L.Control.Layers({'OSM':osm, "Bing":bing}, {}));
        map.addControl(searchControl);




    bing.addTo(map);


        function setBounds() {
        }
        /*function pop_fgc_isoladas_0(feature, layer) {
            var popupContent = '<table>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['FID'] !== null ? Autolinker.link(String(feature.properties['FID'])) : '') + '</td>\
                    </tr>\
                </table>';
            layer.unbindPopup(popupContent, {maxHeight: 400});
        }*/

        function style_fgc_isoladas_0_0() {
            return {
                pane: 'pane_fgc_isoladas_0',
                stroke: false, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(255,127,0,0.55)',
            }
        }
        map.createPane('pane_fgc_isoladas_0');
        map.getPane('pane_fgc_isoladas_0').style.zIndex = 400;
        map.getPane('pane_fgc_isoladas_0').style['mix-blend-mode'] = 'normal';
        var layer_fgc_isoladas_0 = new L.geoJson(json_fgc_isoladas_0, {
            attribution: '<a href=""></a>',
            pane: 'pane_fgc_isoladas_0',
            //onEachFeature: pop_fgc_isoladas_0,
            style: style_fgc_isoladas_0_0,
        });
        bounds_group.addLayer(layer_fgc_isoladas_0);
        map.addLayer(layer_fgc_isoladas_0);
        /*function pop_fgc_aglomerado_1(feature, layer) {
            var popupContent = '<table>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['FID'] !== null ? Autolinker.link(String(feature.properties['FID'])) : '') + '</td>\
                    </tr>\
                </table>';
            layer.unbindPopup(popupContent, {maxHeight: 400});
        }*/

        function style_fgc_aglomerado_1_0() {
            return {
                pane: 'pane_fgc_aglomerado_1',
                stroke: false, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(255,1,1,0.55)',
            }
        }
        map.createPane('pane_fgc_aglomerado_1');
        map.getPane('pane_fgc_aglomerado_1').style.zIndex = 401;
        map.getPane('pane_fgc_aglomerado_1').style['mix-blend-mode'] = 'normal';
        var layer_fgc_aglomerado_1 = new L.geoJson(json_fgc_aglomerado_1, {
            attribution: '<a href=""></a>',
            pane: 'pane_fgc_aglomerado_1',
            //onEachFeature: pop_fgc_aglomerado_1,
            style: style_fgc_aglomerado_1_0,
        });
        bounds_group.addLayer(layer_fgc_aglomerado_1);
        map.addLayer(layer_fgc_aglomerado_1);
        /*function pop_concelho_rm_2(feature, layer) {
            var popupContent = '<table>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['FID'] !== null ? Autolinker.link(String(feature.properties['FID'])) : '') + '</td>\
                    </tr>\
                </table>';
            layer.unbindPopup(popupContent, {maxHeight: 400});
        }*/

        function style_concelho_rm_2_0() {
            return {
                pane: 'pane_concelho_rm_2',
                opacity: 1,
                color: 'rgba(0,0,0,0.85)',
                dashArray: '10,5',
                lineCap: 'square',
                lineJoin: 'bevel',
                weight: 4.0,
                fillOpacity: 0,
            }
        }
        map.createPane('pane_concelho_rm_2');
        map.getPane('pane_concelho_rm_2').style.zIndex = 402;
        map.getPane('pane_concelho_rm_2').style['mix-blend-mode'] = 'normal';
        var layer_concelho_rm_2 = new L.geoJson(json_concelho_rm_2, {
            attribution: '<a href=""></a>',
            pane: 'pane_concelho_rm_2',
            //onEachFeature: pop_concelho_rm_2,
            style: style_concelho_rm_2_0,
        });
        bounds_group.addLayer(layer_concelho_rm_2);
        map.addLayer(layer_concelho_rm_2);

        setBounds();





    </script>

</body>
</html>
